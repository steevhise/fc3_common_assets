{% extends '../layout/layout.html' %}

{% block more %}
{% endblock %}

{% block header %}
    {% include '../partials/header.html' with {loggedIn:true} %}
{% endblock %}

{% block content %}
    <link rel="stylesheet" href="/trumbowyg/ui/trumbowyg.min.css">


    <h2>Static Pages Administration</h2>
<p></p>
<div style="width: 70%; background-color: darkseagreen; padding:20px;">
    <div style="width:50%;">
        <form>
            <input type="hidden" name="crumb" value="{{crumb}}"/>
            <div id="pages">
                <label>Existing Pages:</label>
                <select title="page" name="pageselect" id="pageselect">
                    <option value="" selected></option>
                    {%  for page in pages %}
                        {% if page.path %}
                            <option value="{{ page.page_id }}" >{{ page.title }} (/pages/{{ page.path }})</option>
                        {% endif %}
                    {%  endfor %}
                </select>
            </div>

        <label>title:<input type="text" size=32 name="title" value="{{ page_title }}"></label>
        <span>author: {{ page.author.username }}</span>
        <div>Created: {{ date_created }}</div>
        <span>Date last edited: {{ date_last_modified }}  by {{ page.last_editor.username }}</span>


        <label>Path: <code>/pages/</code><input type="text" size=32 name="path" placeholder="the url of your page, after '/pages/'"></label>

    <textarea id="trumbo" placeholder="enter the text of your page here."></textarea>
        <div class="form-group text-center">
            <button type="submit" role="submit" class="btn-default btn-wide">Save</button>
            <button type="submit" role="preview" class="btn-offer btn-wide">Preview</button>
        </div>

        </form>
    </div>
</div>

{% endblock %}


{% include '../partials/footer.html' %}

{% block extra_scripts %}

    <script src="/trumbowyg/trumbowyg.min.js" ></script>
    <script src="/trumbowyg/plugins/upload/trumbowyg.upload.js" ></script>

<script>
    // document.addEventListener('DOMContentLoaded', function() {

    $(document).ready(function() {
        $('#trumbo').trumbowyg( {
            removeformatPasted: true,
            autogrow: true,
            btnsDef: {
                // Create a new dropdown
                image: {
                    dropdown: ['insertImage', 'upload'],
                    ico: 'insertImage'
                }
            },
            btns: [
                ['viewHTML'],
                ['formatting'],
                'btnGrp-semantic',
                ['superscript', 'subscript'],
                ['link'],
                 'image',
                'btnGrp-justify',
                'btnGrp-lists',
                ['horizontalRule'],
                ['removeformat'],
                ['fullscreen']
            ],
            plugins: [
                'upload',
            ]
        });

        $("#pageselect").select2({
            placeholder: "Select a page to edit",
            //width: "80%",
            theme: "classic"
//            templateResult: formatOption  // i forget what this is for, i guess i don't need.
        });
    });
</script>

{% endblock %}
